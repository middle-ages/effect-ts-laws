<html lang="en" data-theme="light">
  <head>
    <title>Book of Laws</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      media="screen"
      rel="stylesheet"
      type="text/css"
      href="catalog-of-laws/index.css" />
  </head>

  <body>
    <diagram>
      <header>
        <h1>Typeclass Laws</h1>
        <a href="https://github.com/middle-ages/effect-ts-laws"
          >⚖ effect-ts-laws</a
        >
      </header>
      <article>
        <div class="header">
          <d title="Typeclass “extends” relation.">Is a</d>
          <d title="Typeclass name in “effect-ts” source.">Typeclass</d>
          <d title="Law name.">Law</d>
          <d style="grid-column: 4/-1" title="Law predicate.">Predicate</d>
        </div>
        <laws
          style="grid-row-start: 2; margin-top: calc(var(--vpad)); --laws: 3">
          <d></d>
          <e>Equivalence</e>

          <d>transitivity</d><d>a=b ∧ b=c</d><d>⇒</d><d>a=c</d>

          <d>symmetry</d><d>a=b</d><d>⇔</d><d>b=a</d>

          <d>reflexivity</d><d>a</d><d>=</d><d>a</d>
        </laws>

        <separator></separator>
        <laws class="laws-5" style="grid-row-start: 4; --laws: 5">
          <d></d>
          <e>Order</e>

          <d>transitivity</d><d>a≤b ∧ b≤c</d><d>⇒</d><d>a≤c</d>

          <d>reflexivity</d><d>a</d><d>≤</d><d>a</d>

          <d>connectivity</d><d>a≤b</d><d>∨</d><d>b≤a</d>

          <d>complement consistency</d><d>a≤b</d><d>⇒</d><d>¬a>b</d>

          <d>equivalence consistency</d><d>a≤b ∧ b≥a</d><d>⇒</d><d>a=b</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-top></line-middle-top>
            <arrow-head-middle></arrow-head-middle>
          </div>
          <e>Semigroup</e>

          <d>associativity</d><d>(a ⊕ b) ⊕ c</d><d>=</d><d>a ⊕ (b ⊕ c)</d>

          <d>combineMany associativity</d>
          <d>combineMany(a, [b, c])</d>
          <d>=</d>
          <d>combine(a, combine(b, c))</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-bottom></line-middle-bottom>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Monoid</e>

          <d>left identity</d><d>∅ ⊕ a</d><d>=</d><d>a</d>

          <d>right identity</d><d>a</d><d>=</d><d>a ⊕ ∅</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-double-top-down class="half-top"></line-double-top-down>
            <line class="half-bottom down"></line>
            <arrow-head class="top-2"></arrow-head>
            <arrow-head class="bottom-2"></arrow-head>
          </div>
          <e>Invariant</e>

          <d>identity</d><d>imap(id, id)</d><d>=</d> <d>id</d>

          <d>composition</d>
          <d>a ▹ imap(ab, ba) ▹ imap(bc, cb)</d>
          <d>=</d>
          <d>a ▹ imap(bc ∘ ab, ba ∘ cb)</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <line-middle-bottom></line-middle-bottom>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Contravariant</e>

          <d>identity</d><d>contramap(id)</d><d>=</d><d>id</d>

          <d>composition</d>
          <d>fa ▹ contramap(ba) ▹ contramap(cb)</d>
          <d>=</d>
          <d>fa ▹ contramap(ba ∘ cb)</d>
        </laws>

        <separator></separator>
        <laws style="--laws: 2">
          <div>
            <arrow-tail class="top-3"></arrow-tail>
            <arrow-head-middle></arrow-head-middle>
            <arrow-head class="bottom-3"></arrow-head>
            <line class="third-top up line-2"></line>
            <line-double-top-down></line-double-top-down>
            <line class="third-bottom down"></line>
          </div>
          <e>Covariant</e>

          <d>identity</d><d>map(id)</d><d>=</d><d>id</d>

          <d>composition</d>
          <d>a ▹ map(bc ∘ ab)</d>
          <d>=</d><d>a ▹ map(ab) ▹ map(bc)</d>
        </laws>

        <separator></separator>
        <laws class="laws-7" style="--laws: 7">
          <div>
            <line
              class="middle-bottom up"
              style="
                height: calc(
                  var(--gap-line-height) + 5 * var(--line-height-half)
                );
              "></line>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Applicative</e>

          <d>identity</d><d>id ▹ of ▹ ap(a)</d><d>=</d><d>a</d>

          <d>homomorphism</d>
          <d>ab ▹ of ▹ (a ▹ of ▹ ap)</d>
          <d>=</d>
          <d>a ▹ ab ▹ of</d>

          <d>associative composition</d>
          <d>fbc ▹ map(compose) ▹ ap(fab) ▹ ap(fa)</d>
          <d>=</d>
          <d>fbc ▹ ap(fab ▹ ap(fa))</d>

          <d>interchange</d>
          <d>fab ▹ ap(of(a))</d>
          <d>=</d>
          <d>a ▹ apply ▹ of ▹ ap(fab)</d>

          <d>map consistency</d>
          <d>fa ▹ map(ab)</d>
          <d>=</d>
          <d>ab ▹ of ▹ ap(fa)</d>

          <d>product consistency</d>
          <d>fab ▹ ap(fa)</d>
          <d>=</d>
          <d>product(fab, fa) ▹ map(([ab, a]) ⇒ ab(a))</d>

          <d>flatMap consistency</d>
          <d>fab ▹ ap(fa)</d>
          <d>=</d>
          <d>fab ▹ flatMap(ab ⇒ map(fa, ab))</d>
        </laws>

        <separator></separator>
        <laws class="laws-4" style="--laws: 4">
          <div>
            <line
              class="middle-bottom up line-2"
              style="
                height: calc(
                  2 * var(--gap-line-height) + 14 * var(--line-height-half) +
                    var(--gap-height)
                );
              "></line>
            <arrow-tail-middle></arrow-tail-middle>
          </div>
          <e>Monad</e>

          <d>left identity</d><d>of ∘ flatMap(f)</d><d>=</d><d>afb</d>

          <d>right identity</d><d>flatMap(of)</d><d>=</d><d>id</d>

          <d>associativity</d>
          <d>fa ▹ flatMap(afb) ▹ flatMap(bfc)</d>
          <d>=</d>
          <d>fa ▹ flatMap(flatMap(bfc) ∘ afb)</d>

          <d>map consistency</d>
          <d>map(ab)</d>
          <d>=</d>
          <d>flatMap(of ∘ ab)</d>
        </laws>

        <separator></separator>
        <laws
          style="
            padding-bottom: var(--vpad);
            border-bottom: var(--line-table);
            --laws: 3;
          ">
          <d></d>
          <e>Traversable</e>

          <d>identity</d><d>Id.traverse(id)</d><d>=</d><d>id</d>

          <d>composition</d>
          <d>G.map(H.traverse(bhc)) ∘ G.traverse(agb)</d>
          <d>=</d>
          <d>GH.traverse(G.map(bhc) ∘ agb)</d>

          <d>map consistency</d>
          <d>F.map(ab)</d>
          <d>=</d>
          <d>Id.traverse(ab)</d>
        </laws>
      </article>
    </diagram>
  </body>
</html>
